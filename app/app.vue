<template>
  <div class="app">
    <header>
      <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö ‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö title, tabs ‡πÅ‡∏•‡∏∞ controls -->
      <h1>üöÄ SpaceX Launches</h1>
      <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤ -->
      <div class="tabs">
        <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏∏‡πà‡∏° tabs (all, upcoming, past) -->
        <button
          v-for="s in ['all', 'upcoming', 'past']"
          :key="s"
          :class="['tab', scope === s && 'active']"
          @click="scope = s"
        >
          {{ tabLabel[s] }}
        </button>

        <!-- ‡∏ß‡∏ô loop ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏à‡∏≤‡∏Å array ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ 'all', 'upcoming', 'past' -->

        <!-- :key="s"-->
        <!--‡∏Å‡∏≥‡∏´‡∏ô‡∏î key ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Vue track element ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÑ‡∏î‡πâ -->
        <!-- Vue ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ key ‡πÄ‡∏û‡∏∑‡πà‡∏≠ track ‡∏ß‡πà‡∏≤ element ‡πÑ‡∏´‡∏ô‡∏ñ‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç, ‡πÄ‡∏û‡∏¥‡πà‡∏°, ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö -->
        <!-- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà : ‚Üí key="s" Vue ‡∏à‡∏∞‡∏°‡∏≠‡∏á‡∏ß‡πà‡∏≤ "s" ‡∏Ñ‡∏∑‡∏≠ string ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ -->
        <!--‡∏ó‡∏∏‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏à‡∏∞‡πÑ‡∏î‡πâ key="s" ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏´‡∏°‡∏î ‚Üí Vue ‡πÅ‡∏¢‡∏Å‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡∏ß‡πà‡∏≤ element ‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á ‡∏≠‡∏≤‡∏à‡∏°‡∏µ bug ‡πÄ‡∏ß‡∏•‡∏≤ render -->

        <!-- :class="['tab', scope === s && 'active']" -->
        <!-- ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£ bind class ‡πÅ‡∏ö‡∏ö dynamic (‡πÉ‡∏ä‡πâ : ‡πÄ‡∏õ‡πá‡∏ô shorthand ‡∏Ç‡∏≠‡∏á v-bind) -->
        <!-- ‡πÉ‡∏™‡πà class "tab" ‡πÅ‡∏•‡∏∞‡∏ñ‡πâ‡∏≤ scope ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö s ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏° "active" -->
        <!-- : ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ class ‡∏ô‡∏µ‡πâ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö expression (‡πÇ‡∏Ñ‡πâ‡∏î JavaScript) -->
        <!-- ['tab', scope === s && 'active'] ‚Üí ‡πÄ‡∏õ‡πá‡∏ô array ‡∏ó‡∏µ‡πà Vue ‡∏à‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô class string -->
        <!-- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà : Vue ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô expression -->

        <!-- @click="scope = s" -->
        <!-- @click ‡∏Ñ‡∏∑‡∏≠ event binding (‡∏¢‡πà‡∏≠‡∏à‡∏≤‡∏Å v-on:click) -->
        <!-- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° ‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ scope ‡πÄ‡∏õ‡πá‡∏ô s -->
        <!-- ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏î ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î JavaScript ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô "" -->
        <!-- ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà : ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ @ ‡πÄ‡∏≠‡∏á‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ dynamic event handler ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß -->

        <!-- ‡∏™‡∏£‡∏∏‡∏õ : (shorthand ‡∏Ç‡∏≠‡∏á v-bind) = ‡∏ö‡∏≠‡∏Å Vue ‡∏ß‡πà‡∏≤ ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô attribute ‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£/‡πÇ‡∏Ñ‡πâ‡∏î JS ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà string ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ -->
        <!-- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà : Vue ‡∏à‡∏∞‡∏°‡∏≠‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏á‡∏ó‡∏µ‡πà ‚Üí ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏î dynamic ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô -->

        <!-- {{ tabLabel[s] }} -->
        <!-- ‡πÅ‡∏™‡∏î‡∏á label ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ tab ‡∏à‡∏≤‡∏Å object tabLabel ‡πÄ‡∏ä‡πà‡∏ô { all: "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î", upcoming: "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏õ‡∏•‡πà‡∏≠‡∏¢", past: "‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß" } -->
      </div>
      <div class="controls">
        <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö input ‡πÅ‡∏•‡∏∞ select ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö -->
        <input v-model="q" type="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠‚Ä¶" />
        <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ö‡∏ö text ‡πÉ‡∏ä‡πâ v-model ‡∏ú‡∏π‡∏Å‡∏Ñ‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ q ‡πÄ‡∏ß‡∏•‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï q ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ -->
        <select v-model="sortBy">
          <!-- dropdown ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏≠‡∏∞‡πÑ‡∏£ -->
          <option value="date">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤</option>
          <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤ -->
          <option value="name">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠</option>
          <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠ -->
        </select>
        <select v-model="order">
          <!-- dropdown ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á -->
          <option value="desc">‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢</option>
          <!-- ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡∏ô‡πâ‡∏≠‡∏¢ (‡πÉ‡∏´‡∏°‡πà ‚Üí ‡πÄ‡∏Å‡πà‡∏≤, A ‚Üí Z ‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡∏±‡∏ô) -->
          <option value="asc">‡∏ô‡πâ‡∏≠‡∏¢ ‚Üí ‡∏°‡∏≤‡∏Å</option>
          <!-- ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÑ‡∏õ‡∏°‡∏≤‡∏Å (‡πÄ‡∏Å‡πà‡∏≤ ‚Üí ‡πÉ‡∏´‡∏°‡πà, A ‚Üí Z) -->
        </select>
      </div>
    </header>

    <main>
      <div v-if="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‚Ä¶</div>
      <!-- // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‚Ä¶" ‡∏ñ‡πâ‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ loading ‡πÄ‡∏õ‡πá‡∏ô true -->
      <!-- // ‡∏ñ‡πâ‡∏≤ loading ‡πÄ‡∏õ‡πá‡∏ô false ‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å render -->

      <article
        v-for="l in filtered"
        :key="l.id"
        class="card"
        @click="openModal(l)"
      >
        <!-- ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏ú‡πà‡∏≤‡∏ô array ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠ filtered ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ l ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞ item -->
        <!-- ‡πÉ‡∏™‡πà key ‡πÅ‡∏ö‡∏ö dynamic (‡∏ï‡∏≤‡∏° id ‡∏Ç‡∏≠‡∏á item) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Vue track node ‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô -->
        <!-- ‡πÉ‡∏™‡πà class "card" ‡πÉ‡∏´‡πâ article ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö styling -->
        <!-- ‡∏ú‡∏π‡∏Å event ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πå‡∏î ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô openModal(l) -->

        <div class="thumb">
          <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û thumbnail -->
          <img v-if="pickImage(l.links)" :src="pickImage(l.links)" />
          <!-- // ‡∏ñ‡πâ‡∏≤ pickImage(l.links) ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏à‡∏£‡∏¥‡∏á ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ ‡πÇ‡∏î‡∏¢‡πÉ‡∏™‡πà src ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô pickImage ‡∏Ñ‡∏∑‡∏ô‡∏°‡∏≤ -->
          <span v-else>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</span>
          <!-- ‡∏ñ‡πâ‡∏≤ pickImage(l.links) ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û" -->
        </div>
        <div class="content">
          <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô card -->
          <div class="header">
            <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡∏≠‡∏á card (‡πÉ‡∏ä‡πâ‡∏à‡∏±‡∏î layout ‡∏Ç‡∏≠‡∏á‡∏ä‡∏∑‡πà‡∏≠ + meta) -->
            <h2 class="name">{{ l.name }}</h2>
            <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠ launch (‡πÉ‡∏ä‡πâ data binding {{ }} ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å l.name) -->
            <div class="meta">
              <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤ ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (badge) -->
              <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô crew ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ -->
              <span v-if="l.crew?.length" class="crew-badge"
                >{{ l.crew.length }} crews</span
              >
              <span class="badge">{{ formatDate(l.date_utc) }}</span>
              <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á launch ‡πÇ‡∏î‡∏¢‡∏ú‡πà‡∏≤‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô formatDate -->

              <span
                class="state_upcoming"
                v-html="badge(l.success, l.upcoming)"
              ></span>
              <!-- ‡πÅ‡∏™‡∏î‡∏á badge ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ launch ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ v-html -->
              <!-- // badge(l.success, l.upcoming) ‡∏à‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô HTML string -->
              <!-- // ‡πÄ‡∏ä‡πà‡∏ô <span class="badge ok">Launched</span> -->
            </div>
          </div>
        </div>
      </article>
    </main>

    <!-- Modal popup -->
    <div v-if="show" class="modal-backdrop" @click.self="closeModal">
      <div class="modal">
        <header class="modal-header">
          <h2>{{ modal?.name }}</h2>
          <!-- (2.1 ‡∏ä‡∏∑‡πà‡∏≠) -->
          <button class="close-btn" @click="closeModal">‚úñ</button>
        </header>
        <div class="modal-content">
          <!-- 2.2 ‡πÄ‡∏ß‡∏•‡∏≤ -->
          <p class="section">
            {{ new Date(modal.date_utc).toString() }}
          </p>

          <!-- 2.3 ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ô‡∏±‡∏Å‡∏ö‡∏¥‡∏ô -->
          <h3 class="section-title">Crews</h3>
          <!-- 2.4 ‡∏£‡∏π‡∏õ‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏ö‡∏¥‡∏ô -->
          <div class="crew-list">
            <div v-for="cid in modal.crew" :key="cid" class="crew-item">
              <img
                v-if="crew[cid]?.image"
                :src="crew[cid].image"
                :alt="crew[cid]?.name"
              />
              <span>{{ crew[cid]?.name }}</span>
            </div>
            <span v-if="!modal.crew?.length">‚Äî</span>
          </div>

          <!-- 2.5 ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏à‡∏£‡∏ß‡∏î -->
          <h3 class="section-title">Rockets</h3>
          <!-- 2.6 ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏ß‡∏î -->
          <p class="section">{{ rockets[modal.rocket]?.name || "‚Äî" }}</p>
          <!-- 2.7 ‡∏£‡∏π‡∏õ‡∏à‡∏£‡∏ß‡∏î -->
          <div
            v-if="rockets[modal.rocket]?.flickr_images?.length"
            class="rocket-image"
          >
            <img
              :src="rockets[modal.rocket].flickr_images[0]"
              alt="Rocket Image"
            />
          </div>

          <!-- 2.8 ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡πà‡∏≠‡∏¢ -->
          <h3 class="section-title">Launchpad</h3>
          <!-- 2.9 ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡πà‡∏≠‡∏¢ -->
          <p class="section">{{ pads[modal.launchpad]?.full_name || "‚Äî" }}</p>

          <!-- 2.10 ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
          <h3 class="section-title">Details</h3>
          <!-- 2.11 ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
          <p class="section">{{ modal.details || "‚Äî" }}</p>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted } from "vue";
// ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ function ‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏≤‡∏Å Vue Composition API
// - ref ‡πÉ‡∏ä‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive (‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà Vue ‡∏à‡∏∞ track ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á)
// - computed ‡πÉ‡∏ä‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠ dependency ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
// - onMounted ‡πÉ‡∏ä‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å component render ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß

const API = "https://api.spacexdata.com/v4"; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î URL ‡∏Ç‡∏≠‡∏á SpaceX API ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô v4 ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
const launches = ref([]); // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏à‡∏£‡∏ß‡∏î (launches) ‡πÄ‡∏õ‡πá‡∏ô array ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ß‡πà‡∏≤‡∏á []
const rockets = ref({}); // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏ß‡∏î (rockets) ‡πÇ‡∏î‡∏¢‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö object
const pads = ref({}); // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡πà‡∏≠‡∏¢ (launchpads) ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö object
const crew = ref({}); // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡∏ö‡∏¥‡∏ô‡∏≠‡∏ß‡∏Å‡∏≤‡∏® (crew) ‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö object
const loading = ref(true); // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive ‡∏ö‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô true)
const q = ref(""); // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (query string)
const scope = ref("all"); // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö scope ‡∏´‡∏£‡∏∑‡∏≠ filter (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô "all")
const sortBy = ref("date"); // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡∏≤‡∏° "date")
const order = ref("desc"); // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á (descending = ‡∏à‡∏≤‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤)
const show = ref(false); // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• popup/modal (false = ‡∏ã‡πà‡∏≠‡∏ô)
const modal = ref(null); // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ reactive ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• launch ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô modal

const tabLabel = {
  all: "All",
  upcoming: "upcoming",
  past: "Launched",
};

const formatDate = (iso) =>
  new Date(iso).toLocaleString(undefined, {
    dateStyle: "medium",
    timeStyle: "short",
  });

const badge = (status, upcoming) => {
  if (upcoming) return `<span class='badge warn'>upcoming</span>`;
  if (status === true) return `<span class='badge ok'>launches</span>`;
  if (status === false) return `<span class='badge bad'>‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß</span>`;
  return `<span class='badge'>‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö</span>`;
};

const pickImage = (links) => {
  if (!links) return "";
  if (links.patch?.small) return links.patch.small;
  if (links.flickr?.original?.length) return links.flickr.original[0];
  return "";
};

const filtered = computed(() => {
  let list = launches.value.filter((l) => {
    if (scope.value === "upcoming" && !l.upcoming) return false;
    if (scope.value === "past" && l.upcoming) return false;
    if (q.value && !l.name.toLowerCase().includes(q.value.toLowerCase()))
      return false;
    return true;
  });
  list.sort((a, b) => {
    if (sortBy.value === "name") {
      return order.value === "asc"
        ? a.name.localeCompare(b.name)
        : b.name.localeCompare(a.name);
    } else {
      const da = new Date(a.date_utc).getTime();
      const db = new Date(b.date_utc).getTime();
      return order.value === "asc" ? da - db : db - da;
    }
  });
  return list;
});

const fetchByIds = async (endpoint, ids) => {
  if (!ids.size) return {};
  const body = {
    query: { _id: { $in: Array.from(ids) } },
    options: { pagination: false },
  };
  const res = await fetch(`${API}/${endpoint}/query`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(body),
  });
  const json = await res.json();
  const map = {};
  (json.docs || []).forEach((d) => (map[d.id] = d));
  return map;
};

const bootstrap = async () => {
  const res = await fetch(`${API}/launches`);
  const data = await res.json();
  launches.value = data;

  const rocketIds = new Set();
  const padIds = new Set();
  const crewIds = new Set();
  data.forEach((l) => {
    if (l.rocket) rocketIds.add(l.rocket);
    if (l.launchpad) padIds.add(l.launchpad);
    if (Array.isArray(l.crew)) l.crew.forEach((id) => crewIds.add(id));
  });

  rockets.value = await fetchByIds("rockets", rocketIds);
  pads.value = await fetchByIds("launchpads", padIds);
  crew.value = await fetchByIds("crew", crewIds);

  loading.value = false;
};

onMounted(bootstrap);

const openModal = (l) => {
  modal.value = l;
  show.value = true;
};

const closeModal = () => {
  show.value = false;
  modal.value = null;
};
</script>

<style scoped>
/* ‡∏¢‡πà‡∏≠ CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Vue (‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á HTML ‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢) */
.app {
  font-family: sans-serif;
  color: #e8ecf3;
  background: rgb(233, 233, 233);
  min-height: 100vh;
}
header {
  padding: 16px;
  background: rgb(233, 233, 233);
  position: sticky;
  top: 0;
}
.tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 1rem;
  align-items: center;
  justify-content: center; /* ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
}

.tab {
  padding: 8px 16px;
  border: 1px solid #4d36ca;
  border-radius: 6px;
  background-color: white;
  color: #4d36ca;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.2s;
}

.tab:hover {
  background-color: #e6f0ff; /* ‡∏ü‡πâ‡∏≤‡∏≠‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ hover */
}

.tab.active {
  background-color: #4d36ca; /* ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô */
  color: white; /* ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Ç‡∏≤‡∏ß */
}

.controls {
  display: flex;
  gap: 8px;
  margin-top: 12px;
  justify-content: center;
  color: black;
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 12px;
  margin: 20px 0;
}
.card {
  display: flex;
  align-items: center;
  width: 70%;
  margin: 0 auto 12px; /* üü¢ ‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô + margin-bottom */
  background: #fff;
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 12px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: transform 0.2s ease;
}

.card:hover {
  transform: scale(1.01);
}

.thumb {
  flex: 0 0 40px;
  height: 40px;
  margin-right: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f3f3;
  border-radius: 6px;
  overflow: hidden;
}

.thumb img {
  max-width: 100%;
  max-height: 100%;
  object-fit: cover;
}

.content {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.header {
  display: flex;
  justify-content: space-between; /* ‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤ */
  align-items: center;
}

.name {
  font-size: 0.9rem;
  font-weight: bold;
  margin: 0;
  color: #333;
}

.meta {
  display: flex;
  gap: 8px;
  font-size: 0.85rem;
  color: #000000;
}

.state_upcoming {
  font-weight: bold; /* ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏≤ */
  color: #4d36ca; /* ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô */
}

.badge {
  background: #eee;
  padding: 2px 8px;
  border-radius: 4px;
}
.crew-badge {
  background-color: #4d36ca; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô */
  color: white; /* ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
  font-weight: bold;
  padding: 2px 8px;
  border-radius: 12px; /* ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏Ñ‡∏õ‡∏ã‡∏π‡∏• */
  font-size: 0.85rem;
}
.badge.ok {
  color: #22c55e;
  border-color: #22c55e;
}
.badge.bad {
  color: #ef4444;
  border-color: #ef4444;
}
.badge.warn {
  color: #f59e0b;
  border-color: #f59e0b;
}
/* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏°‡∏∑‡∏î */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 50;
}

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á popup */
.modal {
  background: #fff;
  width: 70%;
  max-height: 90vh;
  overflow-y: auto;
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  gap: 16px;
  align-items: center; /* üü¢ ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ä‡∏¥‡∏î‡∏Å‡∏•‡∏≤‡∏á */
  text-align: center; /* üü¢ ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á */
}

/* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
.modal-header {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  padding-bottom: 8px;
  background-color: #ffffff;
}

.modal-header h2 {
  margin: 0;
  font-size: 1.4rem;
  font-weight: bold;
  color: #000000;
  background-color: ;
  text-align: center;
}

.close-btn {
  position: absolute; /* üü¢ ‡∏ß‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° close ‡∏≠‡∏¥‡∏™‡∏£‡∏∞ */
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
}

/* section */
.section-title {
  display: inline-block; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏ô‡∏≤‡∏î‡∏û‡∏≠‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
  padding: 4px 12px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô/‡∏•‡πà‡∏≤‡∏á, ‡∏ã‡πâ‡∏≤‡∏¢/‡∏Ç‡∏ß‡∏≤ */
  border-radius: 999px; /* ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏Ñ‡∏õ‡∏ã‡∏π‡∏•‡πÄ‡∏ï‡πá‡∏° ‡πÜ */
  background-color: #4d36ca; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô */
  color: white; /* ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
  /* font-weight: bold; */
  font-size: 1rem;
  margin: 8px 0;
}

.section {
  margin: 4px 0;
  font-size: 1rem;
  color: #334155;
}

/* ‡∏£‡∏π‡∏õ‡∏à‡∏£‡∏ß‡∏î */
.rocket-image {
  margin: 10px 0;
}
.rocket-image img {
  max-width: 100%;
  border-radius: 8px;
}

/* Crew */
.crew-list {
  display: flex;
  flex-wrap: wrap;
  gap: 50px;
  margin-top: 8px;
  justify-content: center; /* üü¢ ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏Å‡∏ö‡∏¥‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á */
  color: #000000;
}

.crew-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: auto;
  gap: 4px;
}

.crew-item img {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border-radius: 50%;
  border: 2px solid #334155;
}

.chip {
  display: inline-block;
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 2px 8px;
  margin: 2px;
}
</style>
